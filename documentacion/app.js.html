<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding favicon -->
    

    <!-- Adding meta -->
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      app.js
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Generador de Contraseñas</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><ul><li class="menu-li"><a href='https://github.com/franj1748/generador-de-password.git' class=' menu-link' id='' target='_blank'>Proyecto en GitHub</a></li><li class="menu-li"><a href='https://github.com/franj1748/configuracion-jsdoc.git' class=' menu-link' id='' target='_blank'>Archivos de configuración para JSDoc</a></li></ul><div class="accordion collapsed" id="2721859" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#alertaSeguridad">alertaSeguridad</a></li><li class="accordion-list" id=""><a href="global.html#btnGenerar">btnGenerar</a></li><li class="accordion-list" id=""><a href="global.html#btnMasUno">btnMasUno</a></li><li class="accordion-list" id=""><a href="global.html#btnMenosUno">btnMenosUno</a></li><li class="accordion-list" id=""><a href="global.html#btnNumbers">btnNumbers</a></li><li class="accordion-list" id=""><a href="global.html#btnSimbolos">btnSimbolos</a></li><li class="accordion-list" id=""><a href="global.html#btnUpperCase">btnUpperCase</a></li><li class="accordion-list" id=""><a href="global.html#cantidadCaracteres">cantidadCaracteres</a></li><li class="accordion-list" id=""><a href="global.html#caracteres">caracteres</a></li><li class="accordion-list" id=""><a href="global.html#copiarPassword">copiarPassword</a></li><li class="accordion-list" id=""><a href="global.html#generarPassword">generarPassword</a></li><li class="accordion-list" id=""><a href="global.html#inputPassword">inputPassword</a></li><li class="accordion-list" id=""><a href="global.html#setting">setting</a></li><li class="accordion-list" id=""><a href="global.html#validarCaracteres">validarCaracteres</a></li><li class="accordion-list" id=""><a href="global.html#validarSetting">validarSetting</a></li><li class="accordion-list" id=""><a href="global.html#validarStorage">validarStorage</a></li></ul> </div>
      
        <div class="navbar-resize" id="navbar-resize">
          <div class="resize-dots-container">
            <div class="dots"></div>
            <div class="dots"></div>
            <div class="dots"></div>
          </div> 
        </div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        app.js
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Variables 
/**
 * Input con la cantidad de caracteres que tendrá la contraseña. 
 * @type {HTMLElement}
 */
const cantidadCaracteres = document.querySelector('#cantidadCaracteres');
/**
 * Botón para reducir un carácter. 
 * @type {HTMLElement}
 */
const btnMenosUno        = document.querySelector('#menosUno');
/**
 * Botón para aumentar un carácter. 
 * @type {HTMLElement}
 */
const btnMasUno          = document.querySelector('#masUno');
/**
 * Botón de configuración para que la contraseña contenga simbolos. 
 * @type {HTMLElement}
 */
const btnSimbolos        = document.querySelector('#simbolos');
/**
 * Botón de configuración para que la contraseña contenga números. 
 * @type {HTMLElement}
 */
const btnNumbers         = document.querySelector('#numbers');
/**
 * Botón de configuración para que la contraseña contenga mayúsculas. 
 * @type {HTMLElement}
 */
const btnUpperCase       = document.querySelector('#upperCase');
/**
 * Botón para generar la contraseña. 
 * @type {HTMLElement}
 */
const btnGenerar         = document.querySelector('#btnGenerar');
/**
 * Input que contiene la contraseña generada. 
 * @type {HTMLElement}
 */
const inputPassword      = document.querySelector('#password');

/**
 * Contiene propiedades sobre la cantidad de caracteres que tendrá la contraseña y si contendrá o no números, simbolos y mayúsculas. 
 * @type {{caracteres:Number, simbolos:Boolean, numbers:Boolean, upperCase:Boolean, lowerCase:Boolean}}
 */
const setting = {
    caracteres: parseInt(localStorage.getItem('caracteres')),
    simbolos  : localStorage.getItem(`simbolos`) == 'true',
    numbers   : localStorage.getItem(`numbers`) == 'true',
    upperCase : localStorage.getItem(`upperCase`) == 'true',
    lowerCase : true
}

/**
 * Contiene los caracteres para cada caso de la generación de la contraseña. 
 * @type {{numbers:String, simbolos:String, upperCase:String, lowerCase:String}}
 */
const caracteres = {
    numbers  : '0 1 2 3 4 5 6 7 8 9',
    simbolos : '! @ # $ % ^ &amp; * ( ) _ - + = { [ } ] ; : &lt; , > . ? ¿ ! | /',
    upperCase: 'A B C D E F G H I J K L M N O P Q R S T U V W X Y Z',
    lowerCase: 'a b c d e f g h i j k l m n o p q r s t u v w x y z'
}

// Listeners
btnMenosUno.addEventListener('click', validarCaracteres);
btnMasUno.addEventListener('click', validarCaracteres);
btnSimbolos.addEventListener('click', validarSetting);
btnNumbers.addEventListener('click', validarSetting);
btnUpperCase.addEventListener('click', validarSetting);
btnGenerar.addEventListener('click', generarPassword);
inputPassword.addEventListener('click', copiarPassword);
document.addEventListener('DOMContentLoaded', () => {
    
    // Para que se impriman en el DOM los valores de la configuración que estén guardados en el localStorage al cargar la página. 
    validarStorage();
    // Para que aparezca una contraseña generada cada vez que se carga la página con las configuraciones guardadas. 
    generarPassword(); 

    // Iniciar la característica de popover de Bootstrap.  
    const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]');
    const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl));
    const popover = new bootstrap.Popover('.popover-dismiss', {
        trigger: 'focus'
    });
});

// Funciones. 
/**
 * Verifica si se presionó el botón de aumentar o disminuir caracteres y según haya sido el caso, imprime el valor en el DOM y a su vez lo guarda en el localStorage.
 * @param {Event} e El evento que se desencadena y sus características. 
 */
function validarCaracteres(e){

    const {caracteres} = setting;

    if (e.target.id === 'masUno' || e.target.classList.contains('fa-angle-right')){
        if (caracteres &lt; 25){
            cantidadCaracteres.value = ++setting.caracteres; 
            cantidadCaracteres.classList.remove('is-invalid');
            localStorage.setItem(`caracteres`,`${cantidadCaracteres.value}`);
        }else{
            cantidadCaracteres.classList.add('is-invalid');
        }
    }else{
        if (caracteres > 4){
            cantidadCaracteres.value = --setting.caracteres;
            cantidadCaracteres.classList.remove('is-invalid');
            localStorage.setItem(`caracteres`,`${cantidadCaracteres.value}`);
        }else{
            cantidadCaracteres.classList.add('is-invalid');
        }
    }
    
}

/**
 * Cambia el icono en el DOM del botón de la configuración seleccionada según sea el caso, cambia el valor de la propiedad en el objeto de {@link setting} y guarda en el localStorage el valor de la configuración (true|false).
 * @param {Event} e El evento que se desencadena y sus características. 
 */
function validarSetting(e){

    const icono = e.target.nextElementSibling.firstChild;
    icono.classList.toggle('fa-check');
    icono.classList.toggle('fa-xmark');
    setting[e.target.id] = !setting[e.target.id];
    localStorage.setItem(`${e.target.id}`,`${setting[e.target.id]}`);
    
}

/**
 * Genera la contraseña tomando en cuenta los valores de la configuración y la imprime en DOM. 
 */
function generarPassword(){

    let caracteresTotales = '';
    let password = '';

    for(propiedad in setting){

        if (setting[propiedad] === true){
            caracteresTotales += caracteres[propiedad] + ' ';
        }
    }

    caracteresTotales = caracteresTotales.trim();
    caracteresTotales = caracteresTotales.split(' ');

    for(let i = 0; i &lt; setting.caracteres; i++){
        password += caracteresTotales[Math.floor(Math.random() * caracteresTotales.length)];
    }

    inputPassword.value = password;

    if (password.length >= 4 &amp;&amp; password.length &lt;= 8){

        alertaSeguridad('Contraseña débil', 'danger');

    } else if(password.length >= 9 &amp;&amp; password.length &lt;= 12){

        alertaSeguridad('Contraseña bastante segura', 'warning');

    }else{

        alertaSeguridad('Contraseña Segura', 'success');

    }
	
}

/**
 * Copia la contraseña al portapapeles.
 */
function copiarPassword(){
    
    const password = inputPassword.value; 

    navigator.clipboard.writeText(password).then(() => {
        // console.log("Text copied to clipboard...")
    })
}

/**
 * Toma los datos necesarios para crear una alerta con información sobre qué tan fuerte es la contraseña generada. 
 * @param {String} mensaje El texto del mansaje que tendrá la alerta.
 * @param {String} tipo El tipo de alerta que quiere mostrarse, dentro de los tipos de alertas que ofrece Bootstrap.
 */
function alertaSeguridad(mensaje, tipo){
    
    const container = document.querySelector('.container');
    const lastChild = container.lastElementChild;  

    if (lastChild.id === 'alert') {
        container.removeChild(lastChild);  
    }

    const contenedorAlert = document.createElement('div');
    contenedorAlert.id    = 'alert';
    const alert           =`&lt;div id="alerta" class="row d-flex justify-content-center align-items-center">
                                &lt;div class="col-xs-12 col-lg-4">
                                    &lt;div class="alert alert-${tipo} fade show text-center mt-2" role="alert">
                                        ${mensaje}
                                    &lt;/div>
                                &lt;/div>
                            &lt;/div>`
    contenedorAlert.innerHTML = alert;
    container.appendChild(contenedorAlert);

    setTimeout(() => {
        container.removeChild(document.querySelector('#alert'));  
    }, 2000);
    
}

/**
 * Verifica si los elementos necesarios para guardar la configuración existen o no en el localStorage y luego toma los valores existentes para mostrarlos en el DOM y que la configuración se muestre tal cual el usuario la haya dejado. 
 */
function validarStorage(){

    if (!localStorage.getItem(`numbers`)){
        localStorage.setItem(`simbolos`,`true`);
        localStorage.setItem(`numbers`,`true`);
        localStorage.setItem(`upperCase`,`true`);
        localStorage.setItem(`caracteres`,`8`);
    }

    cantidadCaracteres.value = localStorage.getItem(`caracteres`);

    const iconoNumbers = btnNumbers.nextElementSibling.firstChild;
    const iconoSimbolos = btnSimbolos.nextElementSibling.firstChild;
    const iconoUpperCase = btnUpperCase.nextElementSibling.firstChild;

    if(localStorage.getItem('numbers') == 'true'){
        iconoNumbers.classList.add('fa-check');
        iconoNumbers.classList.remove('fa-xmark');
    }else{
        iconoNumbers.classList.remove('fa-check');
        iconoNumbers.classList.add('fa-xmark');
    }

    if(localStorage.getItem('simbolos') == 'true'){
        iconoSimbolos.classList.add('fa-check');
        iconoSimbolos.classList.remove('fa-xmark');
    }else{
        iconoSimbolos.classList.remove('fa-check');
        iconoSimbolos.classList.add('fa-xmark');
    }

    if(localStorage.getItem('upperCase') == 'true'){
        iconoUpperCase.classList.add('fa-check');
        iconoUpperCase.classList.remove('fa-xmark');
    }else{
        iconoUpperCase.classList.remove('fa-check');
        iconoUpperCase.classList.add('fa-xmark');
    }
    
}</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      Creado por Francisco Elis
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"alertaSeguridad","link":"<a href=\"global.html#alertaSeguridad\">alertaSeguridad</a>"},{"title":"btnGenerar","link":"<a href=\"global.html#btnGenerar\">btnGenerar</a>"},{"title":"btnMasUno","link":"<a href=\"global.html#btnMasUno\">btnMasUno</a>"},{"title":"btnMenosUno","link":"<a href=\"global.html#btnMenosUno\">btnMenosUno</a>"},{"title":"btnNumbers","link":"<a href=\"global.html#btnNumbers\">btnNumbers</a>"},{"title":"btnSimbolos","link":"<a href=\"global.html#btnSimbolos\">btnSimbolos</a>"},{"title":"btnUpperCase","link":"<a href=\"global.html#btnUpperCase\">btnUpperCase</a>"},{"title":"cantidadCaracteres","link":"<a href=\"global.html#cantidadCaracteres\">cantidadCaracteres</a>"},{"title":"caracteres","link":"<a href=\"global.html#caracteres\">caracteres</a>"},{"title":"copiarPassword","link":"<a href=\"global.html#copiarPassword\">copiarPassword</a>"},{"title":"generarPassword","link":"<a href=\"global.html#generarPassword\">generarPassword</a>"},{"title":"inputPassword","link":"<a href=\"global.html#inputPassword\">inputPassword</a>"},{"title":"setting","link":"<a href=\"global.html#setting\">setting</a>"},{"title":"validarCaracteres","link":"<a href=\"global.html#validarCaracteres\">validarCaracteres</a>"},{"title":"validarSetting","link":"<a href=\"global.html#validarSetting\">validarSetting</a>"},{"title":"validarStorage","link":"<a href=\"global.html#validarStorage\">validarStorage</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    
      <script src="scripts/resize.js"></script>
      <script type="text/javascript">
        var option = {"min":"300","max":"600"}
        setupResizeOptions(option)
      </script>
    

    


  </body>

</html>
